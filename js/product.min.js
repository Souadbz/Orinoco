const recoverUrlId=window.location.search;console.log(recoverUrlId);const urlSearchParams=new URLSearchParams(recoverUrlId);console.log(urlSearchParams);let id=urlSearchParams.get("id");console.log(id);const affichageProduits=document.getElementById("container-products"),affichageListeProduits=teddy=>{affichageProduits.innerHTML+=`<div class= "card">\n  <img src=${teddy.imageUrl} alt="ours en peluche" id ="img-teddy" class="card-img-top"/>\n  <div class="card-body">\n   <h3 class='card-title'id="card-name" productName="${teddy.name}">${teddy.name}</h3>\n   <p class='card-text'>${teddy.description}</p>\n   <div class="card-price-star">\n      <span class='card-price' price='${teddy.price}'>${teddy.price/100}.00€</span>\n      <span class="star-blue"><i class="fas fa-star"></i></span>\n      <span class="star-blue"><i class="fas fa-star"></i></span>\n      <span class="star-blue"><i class="fas fa-star"></i></span>\n      <span class="star-blue"><i class="fas fa-star"></i></span>\n      <span class="star-blue"><i class="fas fa-star"></i></span>\n   </div>\n  <form> \n  <label for="choix-colors">Choisir la couleur : </label>\n    <select name="choix-colors" id="choix-colors" class="choix">\n  </select></br>\n  <label for ="quantity">Quantité :</label>\n     <select id="quantity" class="form-select mb-3" aria-label="Quantité">\n           <option value="1">1</option>\n           <option value="2">2</option>\n           <option value="3">3</option>\n          <option value="4">4</option>\n          <option value="5">5</option>\n      </select>\n </form>\n   <button id="ajout" id_product="${teddy._id}" class="btn btn-primary" type ="submit" data-bs-toggle="modal" data-bs-target="#myModal">ajouter au panier</button>\n   <a href="index.html"><button id="btn-retour" class="btn btn-primary" type ="submit" data-bs-toggle="modal" data-bs-target="#myModal">Retour à l'accueil</button></a>\n   </div> \n  </div>`;for(let colors of teddy.colors)document.getElementById("choix-colors").innerHTML+=`<option value="${colors}">${colors}</option>`;let panier=JSON.parse(localStorage.getItem("cart"))||[];function addPanier(){let ajout;document.getElementById("ajout").addEventListener("click",(function(){let quantity=parseInt(document.getElementById("quantity").value),id_prod=document.getElementById("ajout").getAttribute("id_product"),imageUrl=document.getElementById("img-teddy").getAttribute("src"),productName=document.getElementById("card-name").getAttribute("productName"),price=document.querySelector(".card-price").getAttribute("price"),colors=document.getElementById("choix-colors").value;var teddyObjet={};teddyObjet.id=id_prod,teddyObjet.image=imageUrl,teddyObjet.name=productName,teddyObjet.quantity=quantity,teddyObjet.price=price,teddyObjet.colors=colors;let produitExist=!1;for(let i=0;i<panier.length;i++){let produit;panier[i].id===id_prod&&(produitExist=i)}function messageAjout(){document.querySelector(".card-body").insertAdjacentHTML("beforeend",'<div id="added-to-cart" class="alert mt-3 mb-0 alert-success alert-dismissible fade show" role="alert">\n                   <p class="alert-heading text-dark">Produit ajouté au panier !</p>\n                   <a class="m-0 text-dark font-weight-bold" href="basket.html"><i class="fas fa-arrow-right"></i> Voir mon panier</a>\n                   <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n                     <span aria-hidden="true">×</span>\n                   </button>\n                 </div>\n                 ')}!1!==produitExist?panier[produitExist].quantity=parseInt(panier[produitExist].quantity)+teddyObjet.quantity:panier.push(teddyObjet),localStorage.setItem("cart",JSON.stringify(panier)),messageAjout()}))}addPanier()},getTeddy=async function(){try{let response=await fetch("http://localhost:3000/api/teddies/"+id);if(response.ok){let teddy=await response.json();affichageListeProduits(teddy)}else console.error("la liste des produits en vente est temporairement indisponible")}catch(e){console.log("erreur api id")}};getTeddy();